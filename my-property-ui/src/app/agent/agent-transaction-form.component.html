<div class="group-box">
    <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center;">
        <h2>Agent Transaction Form</h2>
        <button class="modal-close" type="button" (click)="closeModalClicked()" aria-label="Close">&times;</button>
    </div>
    <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()" class="agent-transaction-form" autocomplete="off">
        <div class="form-sections" style="display: flex; gap: 2rem;">
            <div class="form-section" style="flex: 1;">
                <label for="propertyId">Property <span style="color:red">*</span></label>
                <select id="propertyId" formControlName="propertyId">
                    <option value="">Select</option>
                    <option *ngFor="let prop of activePropertyList" [value]="prop.id">{{ prop.title }}</option>
                </select>

                <label for="agentId">Agent <span style="color:red">*</span></label>
                <select id="agentId" formControlName="agentId" (change)="onAgentChange($event)">
                    <option value="">Select</option>
                    <option *ngFor="let agent of agentList" [value]="agent.id">{{ agent.name }}</option>
                </select>

                <label for="plotId">Plot <span style="color:red">*</span></label>
                <select id="plotId" formControlName="plotId">
                    <option value="">Select</option>
                    <option *ngFor="let plot of plotList" [value]="plot.id">{{ plot.plotNumber }}</option>
                </select>

                <label for="totalBrokerage">Total Brokerage</label>
                <input id="totalBrokerage" formControlName="totalBrokerage" readonly />

                <label for="amountPaidTillDate">Paid Till Date</label>
                <input id="amountPaidTillDate" formControlName="amountPaidTillDate" readonly />

                <label for="balanceAmount">Outstanding Balance</label>
                <input id="balanceAmount" formControlName="balanceAmount" readonly />
            </div>
            <div class="form-section" style="flex: 1;">
                <label for="transactionType">Transaction Type <span style="color:red">*</span></label>
                <select id="transactionType" formControlName="transactionType">
                    <option value="">Select</option>
                    <option *ngFor="let type of transactionTypes" [value]="type">{{ type }}</option>
                </select>

                <label for="amount">Transaction Amount <span style="color:red">*</span></label>
                <input id="amount" formControlName="amount" />

                <label for="paymentMethod">Payment Mode <span style="color:red">*</span></label>
                <select id="paymentMethod" formControlName="paymentMethod">
                    <option value="">Select</option>
                    <option *ngFor="let mode of paymentModes" [value]="mode">{{ mode }}</option>
                </select>

                <label for="referenceNumber">Reference Number</label>
                <input id="referenceNumber" formControlName="referenceNumber" />

                <label for="notes">Remarks</label>
                <textarea id="notes" formControlName="notes" rows="3"></textarea>

                <label for="transactionDate">Transaction Date <span style="color:red">*</span></label>
                <input id="transactionDate" type="date" formControlName="transactionDate" />
            </div>
        </div>
        <div style="display: flex; justify-content: flex-end; padding-right:30px">
          <button type="submit" class="btn btn-primary" [disabled]="transactionForm.invalid">Save</button>
        </div>
    </form>
</div>