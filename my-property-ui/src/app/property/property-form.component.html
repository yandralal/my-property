<div class="group-box">
  <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center;">
    <h2>Property Details Form</h2>
    <button class="modal-close" type="button" (click)="closeModalClicked()" aria-label="Close">&times;</button>
  </div>
  <app-message-box [show]="messageBoxVisible" [message]="messageText" (close)="closeMessageBox()"></app-message-box>
  <form [formGroup]="propertyForm" (ngSubmit)="onSubmit()" class="property-form" autocomplete="off">
  <div class="form-sections">
    <div class="form-section">
      <div>
        <label for="title">Property Title *</label>
        <input id="title" formControlName="title" autocomplete="off" [class.is-invalid]="propertyForm.get('title')?.invalid && propertyForm.get('title')?.touched" />
        <div *ngIf="propertyForm.get('title')?.invalid && propertyForm.get('title')?.touched" class="invalid-feedback d-block">
          <span *ngIf="propertyForm.get('title')?.errors?.['required']">Title is required.</span>
          <span *ngIf="propertyForm.get('title')?.errors?.['minlength']">Minimum 3 characters required.</span>
        </div>
      </div>
      <div>
        <label for="type">Type *</label>
        <select id="type" formControlName="type" [class.is-invalid]="propertyForm.get('type')?.invalid && propertyForm.get('type')?.touched">
          <option value="">Select</option>
          <option value="Residential">Residential</option>
          <option value="Commercial">Commercial</option>
          <option value="Plot">Plot</option>
          <option value="Other">Other</option>
        </select>
      </div>
      <div>
        <label for="status">Status *</label>
        <select id="status" formControlName="status" [class.is-invalid]="propertyForm.get('status')?.invalid && propertyForm.get('status')?.touched">
          <option value="">Select</option>
          <option value="Available">Available</option>
          <option value="Sold">Sold</option>
          <option value="Pending">Pending</option>
          <option value="Rented">Rented</option>
        </select>
      </div>
      <div>
        <label for="price">Price *</label>
        <input id="price" formControlName="price" [class.is-invalid]="propertyForm.get('price')?.invalid && propertyForm.get('price')?.touched" />
        <div *ngIf="propertyForm.get('price')?.invalid && propertyForm.get('price')?.touched" class="invalid-feedback d-block">
          <span *ngIf="propertyForm.get('price')?.errors?.['required']">Price is required.</span>
          <span *ngIf="propertyForm.get('price')?.errors?.['min']">Price must be positive.</span>
        </div>
      </div>
      <div>
        <label for="owner">Owner Name *</label>
        <input id="owner" formControlName="owner" autocomplete="off" [class.is-invalid]="propertyForm.get('owner')?.invalid && propertyForm.get('owner')?.touched" />
        <div *ngIf="propertyForm.get('owner')?.invalid && propertyForm.get('owner')?.touched" class="invalid-feedback d-block">
          <span *ngIf="propertyForm.get('owner')?.errors?.['required']">Owner name is required.</span>
          <span *ngIf="propertyForm.get('owner')?.errors?.['minlength']">Minimum 3 characters required.</span>
        </div>
      </div>
      <div>
        <label for="phone">Phone Number *</label>
        <input id="phone" formControlName="phone" autocomplete="off" maxlength="10" [class.is-invalid]="propertyForm.get('phone')?.invalid && propertyForm.get('phone')?.touched" />
        <div *ngIf="propertyForm.get('phone')?.invalid && propertyForm.get('phone')?.touched" class="invalid-feedback d-block">
          <span *ngIf="propertyForm.get('phone')?.errors?.['required']">Phone is required.</span>
          <span *ngIf="propertyForm.get('phone')?.errors?.['pattern']">Enter a valid 10-digit phone number.</span>
        </div>
      </div>
      <div>
        <label for="email">Email</label>
        <input id="email" formControlName="email" autocomplete="off" />
        <div *ngIf="propertyForm.get('email')?.invalid && propertyForm.get('email')?.touched" class="invalid-feedback d-block">
          <span *ngIf="propertyForm.get('email')?.errors?.['email']">Enter a valid email address.</span>
        </div>
      </div>
    </div>
    <div class="form-section">
      <div>
        <label for="area">Area (sq.ft) *</label>
        <input id="area" type="number" formControlName="area" [class.is-invalid]="propertyForm.get('area')?.invalid && propertyForm.get('area')?.touched" />
        <div *ngIf="propertyForm.get('area')?.invalid && propertyForm.get('area')?.touched" class="invalid-feedback d-block">
          <span *ngIf="propertyForm.get('area')?.errors?.['required']">Area is required.</span>
          <span *ngIf="propertyForm.get('area')?.errors?.['min']">Area must be positive.</span>
        </div>
      </div>
      <div>
        <label for="khasraNo">Khasra No</label>
        <input id="khasraNo" formControlName="khasraNo" />
      </div>
      <div>
        <label for="address">Address</label>
        <input id="address" formControlName="address" autocomplete="off" />
      </div>
      <div>
        <label for="city">City</label>
        <input id="city" formControlName="city" autocomplete="off" />
      </div>
      <div>
        <label for="state">State</label>
        <input id="state" formControlName="state" autocomplete="off" />
      </div>
      <div>
        <label for="zip">Zip Code</label>
        <input id="zip" formControlName="zipCode" autocomplete="off" maxlength="6" />
        <div *ngIf="propertyForm.get('zipCode')?.invalid && propertyForm.get('zipCode')?.touched" class="invalid-feedback d-block">
          <span *ngIf="propertyForm.get('zipCode')?.errors?.['pattern'] || propertyForm.get('zipCode')?.errors?.['invalidZip']">Enter a valid 6-digit zip code.</span>
        </div>
      </div>
      <div>
        <label for="description">Description</label>
        <textarea id="description" formControlName="description"></textarea>
      </div>
    </div>
  </div>
  <button type="submit" class="btn btn-primary" [disabled]="!viewMode && propertyForm.invalid">{{ viewMode ? 'Close' : 'Save' }}</button>
</form>
</div>
